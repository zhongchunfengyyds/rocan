<?xml version="1.0" encoding="UTF-8"?>
<sqlMap>
    <parameterMap class="commonj.sdo.DataObject" id="parameterMap">
        <parameter javaType="date" jdbcType="DATE" property="dateType"/>
    </parameterMap>
    <resultMap class="commonj.sdo.DataObject" id="resultMap">
        <result column="TYPEID" javaType="string" property="typeId"/>
    </resultMap>
      <select id="getProtype" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
	SELECT * FROM(
	SELECT system  "name",system "id",null "type",'true' "expanded",null "code",
	null "parentid",null sortno,orderno  FROM (
	SELECT * FROM (
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as system,type,orderno
	FROM T_DGGL_TzyjcjhhdGD p
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
	union all
	select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
	t1.system "parentid",null sortno	,orderno	
	from(	
	select * from (				
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
	FROM T_DGGL_TzyjcjhhdGD p 
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#
	)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno

</select>
 <select id="getProtype1" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
	SELECT * FROM(
	SELECT sources  "name",sources "id",null "type",'true' "expanded",null "code",
	null "parentid",null sortno,orderno  FROM (
	SELECT * FROM (
	SELECT ROW_NUMBER() OVER ( PARTITION  BY sources ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as sources,type,orderno
	FROM T_DGGL_TzyjcjhhdBOSS p
	join EOS_DICT_ENTRY p1 on p.sources = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
	union all
	select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
	t1.sources "parentid",null sortno	,orderno	
	from(	
	select * from (				
	SELECT ROW_NUMBER() OVER ( PARTITION  BY sources,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as sources,orderno
	FROM T_DGGL_TzyjcjhhdBOSS p 
	join EOS_DICT_ENTRY p1 on p.sources = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#
	)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno
</select>
 <select id="getProtype2" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
	SELECT * FROM(
	SELECT system  "name",system "id",null "type",'true' "expanded",null "code",
	null "parentid",null sortno,orderno  FROM (
	SELECT * FROM (
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as system,type,orderno
	FROM T_DGGL_TzyjcjhhdCRG p
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
	union all
	select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
	t1.system "parentid",null sortno	,orderno	
	from(	
	select * from (				
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
	FROM T_DGGL_TzyjcjhhdCRG p 
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#
	)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno
</select>
 <select id="getProtype3" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
	SELECT * FROM(
	SELECT system  "name",system "id",null "type",'true' "expanded",null "code",
	null "parentid",null sortno,orderno  FROM (
	SELECT * FROM (
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as system,type,orderno
	FROM T_DGGL_TzyjcjhhdFM p
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
	union all
	select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
	t1.system "parentid",null sortno	,orderno	
	from(	
	select * from (				
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
	FROM T_DGGL_TzyjcjhhdFM p 
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#
	)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno
</select>
 <select id="getProtype4" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
SELECT * FROM(
SELECT zytool  "name",zytool "id",null "type",'true' "expanded",null "code",
null "parentid",null sortno,orderno  FROM (
SELECT * FROM (
SELECT ROW_NUMBER() OVER ( PARTITION  BY zytool ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as zytool,type,orderno
FROM T_DGGL_TzyjcjhhdRQ p
join EOS_DICT_ENTRY p1 on p.zytool = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.zytool "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY zytool,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as zytool,orderno
FROM T_DGGL_TzyjcjhhdRQ p 
join EOS_DICT_ENTRY p1 on p.zytool = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno
</select>
 <select id="getProtype5" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
	SELECT * FROM(
	SELECT system  "name",system "id",null "type",'true' "expanded",null "code",
	null "parentid",null sortno,orderno  FROM (
	SELECT * FROM (
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system ORDER BY orderno desc ) AS RNUM,p1.DICTNAME as system,type,orderno
	FROM T_DGGL_TzyjcjhhdZC p
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#) A WHERE <![CDATA[RNUM < 2]]>)t
	union all
	select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
	t1.system "parentid",null sortno	,orderno	
	from(	
	select * from (				
	SELECT ROW_NUMBER() OVER ( PARTITION  BY system,checkprojectname ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
	FROM T_DGGL_TzyjcjhhdZC p 
	join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
	where isdelete = 0 and base=#baseid# and crew=#crewid#
	)B WHERE <![CDATA[RNUM < 2]]>)t1)t2 ORDER BY orderno
 
</select>
 <select id="query" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
SELECT distinct(t2.name) as distinctField,t2.* FROM(
SELECT top 1 '规范法定项目'  "name",'规范法定项目' "id",null "type",'true' "expanded",null "code",
null "parentid",null sortno,orderno  FROM (
select  orderno from T_DGGL_TZYJCJHHDGD  where system='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDRQ where zytool='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDCRG where system='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDZC where system='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDBOSS where sources='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDFM where system='GFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
) t order by t.orderno
union all
SELECT top 1 '规范非法定项目'  "name",'规范非法定项目' "id",null "type",'true' "expanded",null "code",
null "parentid",null sortno,orderno  FROM (
select  orderno from T_DGGL_TZYJCJHHDGD  where system='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDRQ where zytool='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDCRG where system='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDZC where system='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDBOSS where sources='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
union all 
select orderno from T_DGGL_TZYJCJHHDFM where system='GFFFD' and isdelete = 0 and base=#baseid# and crew=#crewid#
) t order by t.orderno
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.system "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
FROM T_DGGL_TZYJCJHHDGD p 
join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.zytool "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as zytool,orderno
FROM T_DGGL_TZYJCJHHDRQ p
join EOS_DICT_ENTRY p1 on p.zytool = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.system "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
FROM T_DGGL_TZYJCJHHDCRG p
join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.system "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
FROM T_DGGL_TZYJCJHHDZC p
join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.sources "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as sources,orderno
FROM T_DGGL_TZYJCJHHDBOSS p
join EOS_DICT_ENTRY p1 on p.sources = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
union all
select distinct t1.checkprojectname name,'1' "id",null "type",null "expanded",null "code",
t1.system "parentid",null sortno	,orderno	
from(	
select * from (				
SELECT ROW_NUMBER() OVER ( PARTITION  BY checkprojectname,p1.DICTNAME ORDER BY orderno desc ) AS RNUM,checkprojectname,p1.DICTNAME as system,orderno
FROM T_DGGL_TZYJCJHHDFM p
join EOS_DICT_ENTRY p1 on p.system = p1.DICTID
where isdelete = 0 and base=#baseid# and crew=#crewid#
)B WHERE <![CDATA[RNUM < 2]]>)t1
)t2 

</select>
<select id="deleteRecoversData" parameterClass="java.lang.String" resultClass="commonj.sdo.DataObject">
		delete T_DGGL_TzyjcjhhdGD where id = #value#
	</select>
	<select id="getStatus" parameterClass="java.lang.String" resultClass="commonj.sdo.DataObject">
		select DICTID as id,DICTNAME as name from EOS_DICT_ENTRY where DICTTYPEID = #value#
	</select>
	<select id="getBaseCircle" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select cstart,cend from T_DXGL_ZQCONTROLL where JDID =  #baseid# and JZID = #crewid# and isdelete = 0;
	</select>
	<select id="getrcBaseCircle" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select rcstart,rcend from T_DXGL_ZQCONTROLL where JDID =  #baseid# and JZID = #crewid# and isdelete = 0;
	</select>
	 <update id="recovery" parameterClass="java.util.HashMap" >
update $entityName$ set isdelete = '0' where uuid = #primeryKeyValue#
 </update> 
  <select id="deleteall" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject" >
delete  $entityName$ where uuid = #primeryKeyValue#
 </select>
  <update id="logic" parameterClass="java.util.HashMap" >
update $entityName$ set isdelete = '1' where uuid = #primeryKeyValue#
 </update>
</sqlMap>