<?xml version="1.0" encoding="UTF-8"?>
<!-- author:diyz -->
<sqlMap>
    <parameterMap class="commonj.sdo.DataObject" id="parameterMap">
        <parameter javaType="date" jdbcType="DATE" property="dateType"/>
    </parameterMap>
    
 	
    <select id="getJdInfo"  resultClass="commonj.sdo.DataObject">
       select id as id,name as name  from TD_DXGL_JDDICT  where ISDELETE != '1' order by ord
    </select>
    
  <select id="getJdInfoByRole" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
    select id as id,name as name  from TD_DXGL_JDDICT 
    where  ISDELETE != '1'  and  name 
    in
      <iterate open="(" close=")" conjunction=",">
			#paramList[]#
	</iterate>
		
     order by ord
  </select>
  
      <select id="getJzInfoByJdid" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
    
       select id as id,name as name    
       from TD_DXGL_JIZUDICT     
       where ISDELETE != '1'
       <isNotNull property="jdid">
             and jdid = #jdid#
       </isNotNull>
       
       order by ord
    
    </select>
    
    
          <select id="getJdnameByJdid" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
    
       select name    
       from TD_DXGL_JDDICT     
       where ISDELETE != '1'
       <isNotNull property="jdid">
             and id = #jdid#
       </isNotNull>
    
    </select>
    
    <select id="getJznameByJzid" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
    
       select name    
       from TD_DXGL_JIZUDICT     
       where ISDELETE != '1'
       <isNotNull property="jzid">
             and id = #jzid#
       </isNotNull>
    
    </select>
    
    <select id="fuzzyMatchingDictionary" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
       select DICTID,DICTNAME from EOS_DICT_ENTRY where 1=1
       <isNotNull property="DICTTYPEID">
             and DICTTYPEID = #DICTTYPEID#
       </isNotNull>
       <isNotNull property="DICTNAME">
             and DICTNAME LIKE '%' + #DICTNAME# + '%'
       </isNotNull>
    
    </select>
    
    
    <select id="returnDicValue" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
       select DICTID,DICTNAME from EOS_DICT_ENTRY where 1=1
       <isNotNull property="DICTTYPEID">
             and DICTTYPEID = #DICTTYPEID#
       </isNotNull>
       <isNotNull property="DICTID">
             and DICTID = #DICTID# 
       </isNotNull>
       <isNotNull property="DICTNAME">
             and DICTNAME = #DICTNAME# 
       </isNotNull>
    </select>
    
    <select id="returnJdValue" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
       select ID,NAME  
       from 
       TD_DXGL_JDDICT  where ISDELETE='0'
       <isNotNull property="ID">
             and ID = #ID#
       </isNotNull>
       <isNotNull property="NAME">
             and NAME = #NAME#
       </isNotNull>
    
    </select>
    
    <select id="getDictInfoByType" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
       select DICTID,DICTNAME from EOS_DICT_ENTRY where 1=1
       <isNotNull property="DICTTYPEID">
             and DICTTYPEID = #DICTTYPEID#
       </isNotNull>
      ORDER BY SORTNO
    </select>
    
      <select id="returnJzValue" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject"> 
       select ID,NAME 
       from 
       TD_DXGL_JIZUDICT where ISDELETE='0'
       <isNotNull property="ID">
             and ID in 
             <iterate  property="ID" conjunction="," close=")" open="(" >  
                #ID[]#  
            </iterate>  
       </isNotNull>
     	<isNotNull property="NAME">
             and NAME in
			 <iterate  property="NAME" conjunction="," close=")" open="(" >  
                #NAME[]#  
            </iterate>  
       </isNotNull>
    </select>
    
    <!--参考图例        批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindCKT" parameterClass="java.util.HashMap" > 
       UPDATE T_CGN_DGGL_CKTLGL SET  FJ = #FILENAME# , FILDID = #FILEID# where CKTLMC = #KEY# AND JD = #POWER# AND JZID = #CREW#  AND ISDELETE='0'
    </update>
    <!--程序管理        批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindCXGL" parameterClass="java.util.HashMap" > 
       UPDATE T_CGN_DGGL_CXGL SET  FJ = #FILENAME# , FILDID = #FILEID# where JM = #KEY# AND DZID = #POWER# AND JZID = #CREW#  AND ISDELETE='0'
    </update>
     <!--焊接工艺评定报告管理      批量上传附件 焊接工艺评定报告管理表数据绑定 -->
    <update id="attachBindGYPD" parameterClass="java.util.HashMap" > 
      UPDATE WELDING_ASSESSMENT SET fj = #FILENAME# ,  fileid= #FILEID# where assessmentid = #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
    <!--焊机管理      批量上传附件 焊机管理表数据绑定 -->
    <update id="attachBindHJGL" parameterClass="java.util.HashMap" > 
      UPDATE WELDING_MACHINE SET  certificate = #FILENAME# , FILEID = #FILEID# where number= #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
    <!--焊工管理      批量上传附件 焊工管理表数据绑定 -->
    <update id="attachBindHGGL" parameterClass="java.util.HashMap" > 
      UPDATE WELDING_WELDER SET  fj = #FILENAME# , FILEID = #FILEID# where operatingnumber= #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
    <!--焊材管理      批量上传附件 焊材管理表数据绑定 -->
    <update id="attachBindHCGL" parameterClass="java.util.HashMap" > 
      UPDATE WELDING_MATERIAL SET  FJ = #FILENAME# , FILDID = #FILEID# where name= #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
    <!--焊接工艺卡管理  	批量上传附件 -->
    <update id="attachBindGYKBH" parameterClass="java.util.HashMap" > 
     UPDATE T_WELDING_PROCESSCARD SET  enclosure = #FILENAME# , FILDID = #FILEID# where card_number= #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
    <!--=役检报告管理  	批量上传附件 -->
    <update id="attachBindBGBM" parameterClass="java.util.HashMap">
    UPDATE T_SERVICEINSPECTIONREPORT  SET fj = #FILENAME#,fileid = #FILEID# where reportcoding= #KEY# AND JD = #POWER#  AND isdel='0'
    </update>
      <!--无损授权      批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindWSSQ" parameterClass="java.util.HashMap" > 
      UPDATE T_DXGL_ZZSQGL_WSJCZZGL SET  ZMWJ = #FILENAME# , FILDID = #FILEID# where ZSBH = #KEY# AND JD = #POWER#  AND ISDELETE='0'
    </update>
      <!--焊工       批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindHG" parameterClass="java.util.HashMap" > 
      UPDATE T_DXGL_ZZSQGL_HGZZGL SET  ZMWJ = #FILENAME# , FILDID = #FILEID# where IDNUMBER = #KEY# AND JD = #POWER#  AND ISDELETE='0'
    </update>
     <!--容器水压热备仪表        批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindSBYB" parameterClass="java.util.HashMap" > 
      UPDATE T_DXGL_SYSY_FACILITYINFO SET  FILEID = #FILEID#,FJ = #FILENAME#  where CCBH = #KEY# AND JD = #POWER#  AND ISDELETE='0'
    </update>
   <!--核岛维修范畴目视检验人员管理       批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindHDWX" parameterClass="java.util.HashMap" > 
      UPDATE T_DXGL_ZZSQGL_HDWXFCMSJYRYGL SET  ZMWJ = #FILENAME# , FILDID = #FILEID# where IDNUMBER = #KEY# AND JD = #POWER#  AND ISDELETE='0'
    </update>
    
    <!--知识库 百科全书       批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindSJNAME" parameterClass="java.util.HashMap" > 
      UPDATE T_IN_ENCYCLOPEDIA SET  ENCLOSURE = #FILENAME# , FILDID = #FILEID# WHERE NAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
      <!--知识库 内外部经验       批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindFILENAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_EXEXPERIENCE SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE filesource=#name# and  FILENAME= #KEY# AND JD = #POWER#  AND ISDEL='0' 
    </update>
     <!--知识库     法规     批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindSTATUTENAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_STATUTE SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE NAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
     <!--知识库    规范     批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindCHAPTERNUMANDNAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_SPECIFICATION SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE CHAPTERNUMANDNAME = #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
      <!--知识库    标准     批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindCRITERIONNAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_CRITERION SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE  NAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
     <!--知识库  术语    批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindCHINESSTERMNAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_TERM SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE  CHINESSTERMNAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
    <!--知识库  专家解读    批量上传附件 数据与附件公共表数据绑定 -->
    <update id="attachBindPAPERSNAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_EXPERTINTERPRETATION  SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE  PAPERSNAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
    <!--知识库  内部文件  批量上传附件 数据与附件公共表数据绑定 -->
       <update id="attachBindWJNAME" parameterClass="java.util.HashMap" > 
       UPDATE T_IN_INTERNALDOCUMENTS SET  ENCLOSURE = #FILENAME# , FILEID = #FILEID# WHERE  PAPERSNAME= #KEY# AND JD = #POWER#  AND ISDEL='0'
    </update>
    
    
    
	  <!--大纲新增       获取排序字段 -->
    <select id="getDataByOrderno" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select * from $tablename$ where <![CDATA[orderno > #start# and orderno < #end#]]> order by orderno
	</select>
	
	<!-- 更改流程状态  -->
	<update id="updateProcessStatus" parameterClass="java.util.HashMap" > 
       UPDATE $TABLENAME$ SET  ProcessStatus = #ProcessStatus#  where processInstId = #processInstId# 
    </update>
	
	
	<select id="getNDJHDXdata" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select id,C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,C17,C18,C19,C20,C21,C22,C23,C24,C25,C26,C27,C28,C29,C30,C31,C32,C33,C34,C35,C36,C37,C38,C39,C40,C41,C42,C43,C44,C45,C46,C47,C48,C49,C50,C51,C52,C53,C54,C55,C56,C57,C58,C59,C60 from $tablename$ where detailed = #detailed# and crew = #crew#
	</select>
	
	<select id="getNDJHRCdata" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select id,n1991,n1992,n1993,n1994,n1995,n1996,n1997,n1998,n1999,n2000,n2001,n2002,n2003,n2004,n2005,n2006,n2007,n2008,n2009,n2010,n2011,n2012,n2013,n2014,n2015,n2016,n2017,n2018,n2019,n2020,n2021,n2022,n2023,n2024,n2025,n2026,n2027,n2028,n2029,n2030,n2031,n2032,n2033,n2034,n2035,n2036,n2037,n2038,n2039,n2040,n2041,n2042,n2043,n2044,n2045,n2046,n2047,n2048,n2049,n2050,n2051,n2052,n2053,n2054,n2055,n2056,n2057,n2058,n2059,n2060,n2061,n2062,n2063,n2064,n2065,n2066,n2067,n2068,n2069,n2070,n2071,n2072,n2073,n2074,n2075,n2076,n2077,n2078,n2079,n2080,n2081,n2082,n2083,n2084,n2085,n2086,n2087,n2088,n2089 from $tablename$ where detailed = #detailed# and crew = #crew#
	</select>
	
	<select id="getDataByOrderno1" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select * from $tablename$ where <![CDATA[orderno > #start# and orderno < #end#]]> order by orderno;
	</select>
	
	<select id="getFDDGDXdata" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select id,inspectplan,C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,C17,C18,C19,C20,C21,C22,C23,C24,C25,C26,C27,C28,C29,C30,C31,C32,C33,C34,C35,C36,C37,C38,C39,C40,C41,C42,C43,C44,C45,C46,C47,C48,C49,C50,C51,C52,C53,C54,C55,C56,C57,C58,C59,C60 from T_DGGL_ENTRY where detailed = #detailed# and crew = #crew#
		union all
		select id,inspectplan,C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12,C13,C14,C15,C16,C17,C18,C19,C20,C21,C22,C23,C24,C25,C26,C27,C28,C29,C30,C31,C32,C33,C34,C35,C36,C37,C38,C39,C40,C41,C42,C43,C44,C45,C46,C47,C48,C49,C50,C51,C52,C53,C54,C55,C56,C57,C58,C59,C60 from T_DGGL_GFFFD_DXTM where detailed = #detailed# and crew = #crew#
	</select>
	
	<select id="getFDDGRCdata" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select id,inspectplan,n1991,n1992,n1993,n1994,n1995,n1996,n1997,n1998,n1999,n2000,n2001,n2002,n2003,n2004,n2005,n2006,n2007,n2008,n2009,n2010,n2011,n2012,n2013,n2014,n2015,n2016,n2017,n2018,n2019,n2020,n2021,n2022,n2023,n2024,n2025,n2026,n2027,n2028,n2029,n2030,n2031,n2032,n2033,n2034,n2035,n2036,n2037,n2038,n2039,n2040,n2041,n2042,n2043,n2044,n2045,n2046,n2047,n2048,n2049,n2050,n2051,n2052,n2053,n2054,n2055,n2056,n2057,n2058,n2059,n2060,n2061,n2062,n2063,n2064,n2065,n2066,n2067,n2068,n2069,n2070,n2071,n2072,n2073,n2074,n2075,n2076,n2077,n2078,n2079,n2080,n2081,n2082,n2083,n2084,n2085,n2086,n2087,n2088,n2089 from T_DGGL_DAILY where detailed = #detailed# and crew = #crew#
		union all
		select id,inspectplan,n1991,n1992,n1993,n1994,n1995,n1996,n1997,n1998,n1999,n2000,n2001,n2002,n2003,n2004,n2005,n2006,n2007,n2008,n2009,n2010,n2011,n2012,n2013,n2014,n2015,n2016,n2017,n2018,n2019,n2020,n2021,n2022,n2023,n2024,n2025,n2026,n2027,n2028,n2029,n2030,n2031,n2032,n2033,n2034,n2035,n2036,n2037,n2038,n2039,n2040,n2041,n2042,n2043,n2044,n2045,n2046,n2047,n2048,n2049,n2050,n2051,n2052,n2053,n2054,n2055,n2056,n2057,n2058,n2059,n2060,n2061,n2062,n2063,n2064,n2065,n2066,n2067,n2068,n2069,n2070,n2071,n2072,n2073,n2074,n2075,n2076,n2077,n2078,n2079,n2080,n2081,n2082,n2083,n2084,n2085,n2086,n2087,n2088,n2089 from T_DGGL_GFFFD_RCTM where detailed = #detailed# and crew = #crew#
	</select>
	<!-- 经验反馈当天编号查询取最大编号-->
	<select id="getBhNo"  resultClass="commonj.sdo.DataObject">
    	SELECT top 1 t.bh AS bh FROM (SELECT SUBSTRING(bh,(len(bh)-CHARINDEX('-',REVERSE(bh)) + 2 ),CHARINDEX('-',REVERSE(bh))-1) num,bh,addtime FROM	T_QCJSGL_JYFKHSJGL) t WHERE	DateDiff(dd,t.addtime,getdate()) = 0 ORDER BY	t.addtime DESC,t.num desc
    </select>
    
    <select id="getBaseCircleForC" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select cstart,cend from T_DXGL_ZQCONTROLL where JDID =  #baseid# and JZID = #crewid# and isdelete = 0;
	</select>
	
	<select id="getBaseCircleForN" parameterClass="java.util.HashMap" resultClass="commonj.sdo.DataObject">
		select rcstart cstart,rcend cend from T_DXGL_ZQCONTROLL where JDID =  #baseid# and JZID = #crewid# and isdelete = 0;
	</select>
	
	<select id="getStatus" parameterClass="java.lang.String" resultClass="commonj.sdo.DataObject">
		select DICTID as id,DICTNAME as name from EOS_DICT_ENTRY where DICTTYPEID = #value# order by SORTNO 
	</select>
	
	
  <!-- 缺陷显示详细信息查询模板对应的最大编号-->
	<select id="getQxMaxBhByTemplate"  resultClass="commonj.sdo.DataObject" parameterClass="java.util.HashMap">
    	select max(defectdisplaynumber) as maxbh from T_DEFECTSSHOWDETAILEDINFORMATION
		where jd = #jdid#
		and jz = #jzid#
		and stencilplate =#stencilplate#
		and isdel != '1'
		;
    </select>
	
</sqlMap>