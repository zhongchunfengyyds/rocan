<?xml version="1.0" encoding="UTF-8"?>

<sqlMap>
    <parameterMap class="commonj.sdo.DataObject" id="parameterMap">
        <parameter javaType="date" jdbcType="DATE" property="dateType"/>
    </parameterMap>
    <resultMap class="commonj.sdo.DataObject" id="resultMap">
        <result column="TYPEID" javaType="string" property="typeId"/>
    </resultMap>
    
    <!-- 核岛维修范畴目视检验人员管理 -->
    <select id="searchNumber" resultClass="commonj.sdo.DataObject"> 
      SELECT DISTINCT(IDNUMBER) AS IDNUMBER   
      FROM T_DXGL_ZZSQGL_HDWXFCMSJYRYGL 
    </select>   
    <update id="updateZt"> 
       UPDATE T_DXGL_ZZSQGL_HDWXFCMSJYRYGL 
       SET ZT='YGQ' 
       WHERE YXRQ &lt;= GETDATE()
    </update> 
    <!-- 焊工资质管理-->
    <select id="getWelderNumber" resultClass="commonj.sdo.DataObject"> 
       SELECT DISTINCT(IDNUMBER) AS IDNUMBER   
       FROM T_DXGL_ZZSQGL_HGZZGL
    </select>
     <!-- 授权管理-->
     <select id="getAuthNumber" resultClass="commonj.sdo.DataObject"> 
       SELECT DISTINCT(IDNUMBER) AS IDNUMBER   
       FROM T_DXGL_ZZSQGL_SQGL
    </select>
    
    
    <select id="getInfoByKeyWord" parameterClass="java.util.HashMap"  resultClass="commonj.sdo.DataObject"> 
      
	     SELECT  * FROM (
 			SELECT  ROW_NUMBER() OVER ( PARTITION  BY IDNUMBER,NAME,EMPNUBMER ORDER BY addtime desc ) AS RNUM ,
            IDNUMBER,NAME,EMPNUBMER,SEX,XL,ZC,ZYLY
            FROM  T_DXGL_ZZSQGL_SQGL
            WHERE ISDELETE = '0'
		    <isNotNull prepend =" AND " property="EMPNUBMER" >
		   		EMPNUBMER LIKE '%' + #EMPNUBMER# + '%'
		   </isNotNull>  
		   <isNotNull prepend =" AND " property="IDNUMBER" >
		   		IDNUMBER LIKE  '%' + #IDNUMBER# + '%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="JD" >
		   		JD = #JD#
		   </isNotNull> 
		) AS T
 		WHERE  T.RNUM = 1
    </select>
    
    <update id="bindProcessInstIdAndData" parameterClass="java.util.HashMap">
    	UPDATE T_DXGL_ZZSQGL_SQGL SET processInstId=$processInstId$ where uuid in (#uuid#)
    </update>
    
     <update id="processWriteZT" parameterClass="java.util.HashMap">
    	UPDATE T_DXGL_ZZSQGL_SQGL SET zt=#zt# where processInstId=$processInstId$
    </update>
     <!-- 特殊验证项目人员管理-->
     <select id="getPersonNumber" resultClass="commonj.sdo.DataObject"  parameterClass="java.util.HashMap"> 
       SELECT DISTINCT(IDNUMBER) AS IDNUMBER   
       FROM T_DXGL_ZZSQGL_TSYZXMRYGL where JD=#jd#
    </select>
     <!--无损检测资质管理-->
     <select id="getNdtNumber" resultClass="commonj.sdo.DataObject"  parameterClass="java.util.HashMap"> 
       SELECT DISTINCT(IDNUMBER) AS IDNUMBER   
       FROM T_DXGL_ZZSQGL_WSJCZZGL where JD=#jd#
    </select>
       <update id="processAdminWriteZT" parameterClass="java.util.HashMap">
    	UPDATE T_DXGL_ZZSQGL_SQGL SET zt=#zt# where uuid in (#uuid#)
    </update>
     <!--审查模块-->
    <select id="getrealNumber" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	SELECT name,idnumber,sex,empnubmer,xl,zc,sqlx,sqfwhdj,sqyxq,zmwj,zt,bz,t2.FILE_ID as fileId,t2.FILE_PATH
as filepath,t2.FILE_REAL_NAME as fileRealName FROM T_DXGL_ZZSQGL_SQGL t1
left join T_COMMON_FILEUPLOAD t2 on t1.FILDID = t2.file_id where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and idnumber in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
        <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="idnumbers">
                and idnumber in
                <iterate property="idnumbers" conjunction="," open="(" close=")">
                    #idnumbers[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   		NAME= #name# 
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="empnubmer" >
		   		empnubmer = #empnubmer# 
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="sqlx" >
		   		sqlx = #sqlx# 
		   </isNotNull> 
 	</select>
 	
 	
 	
 	     <!--授权管理审查模块数据-->
    <select id="getAutpagedata" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select uuid,
name,idnumber,sex,empnubmer,xl,zc,zyly,sqlx,sqfwhdj,sqyxq,zmwj,zt,bz 
,t2.FILE_ID as fileId,t2.FILE_PATH
as filepath,t2.FILE_REAL_NAME as fileRealName FROM T_DXGL_ZZSQGL_SQGL t1
left join T_COMMON_FILEUPLOAD t2 on t1.FILDID = t2.file_id where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and uuid in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
         <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="idnumbers">
                and idnumber in
                <iterate property="idnumbers" conjunction="," open="(" close=")">
                    #idnumbers[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   		NAME like '%'+#name#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="empnumber" >
		   empnubmer like '%'+#empnumber#+'%'  
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="sqlx" >
		   		sqlx = #sqlx# 
		   </isNotNull> 
		     order by orderindex desc

 	</select>
 
   <!--无损检测审查模块数据-->
    <select id="getNdtpagedata" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select uuid,
name,sex,empnubmer,idnumber,zzlx,zzdj,zsbh,gzdw,yxq,zmwj,zt,bz  
,t2.FILE_ID as fileId,t2.FILE_PATH
as filepath,t2.FILE_REAL_NAME as fileRealName FROM T_DXGL_ZZSQGL_WSJCZZGL t1
left join T_COMMON_FILEUPLOAD t2 on t1.FILDID = t2.file_id where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and uuid in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
         <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="idnumbers">
                and idnumber in
                <iterate property="idnumbers" conjunction="," open="(" close=")">
                    #idnumbers[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   	NAME like '%'+#name#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="zzlx" >
		   		zzlx = #zzlx#
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="gzdw" >
		   		gzdw like '%'+#gzdw#+'%'
		   </isNotNull> 
		   order by orderindex desc
		 
		   
		   
			
 	</select>
 	
 	   <!--特殊验证审查模块数据-->
    <select id="getPropagedata" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select uuid,
name,sex,empnubmer,idnumber,sydx,yzxm,gzdw,pzrq,yxrq,zmwj,zt,bz 
,t2.FILE_ID as fileId,t2.FILE_PATH
as filepath,t2.FILE_REAL_NAME as fileRealName FROM T_DXGL_ZZSQGL_TSYZXMRYGL t1
left join T_COMMON_FILEUPLOAD t2 on t1.FILDID = t2.file_id where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and uuid in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
         <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="sydx">
                and sydx  like '%'+#sydx#+'%' 
                
         </isNotNull>
         <isNotNull property="yzxm">
                and yzxm =#yzxm#
                
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   		NAME like '%'+#name#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="empnumber" >
		   		empnubmer like '%'+#empnumber#+'%'  
		   </isNotNull>
		   order by orderindex desc
		 
 	</select>
 	
 	 <!--核岛维修审查模块数据-->
    <select id="getVispagedata" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select uuid,
name,sex,empnubmer,idnumber,sqlx,gzdw,yxrq,zmwj,zt,bz  
,t2.FILE_ID as fileId,t2.FILE_PATH
as filepath,t2.FILE_REAL_NAME as fileRealName FROM T_DXGL_ZZSQGL_HDWXFCMSJYRYGL t1
left join T_COMMON_FILEUPLOAD t2 on t1.FILDID = t2.file_id where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and idnumber in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
        <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="idnumbers">
                and idnumber in
                <iterate property="idnumbers" conjunction="," open="(" close=")">
                    #idnumbers[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   	NAME like '%'+#name#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="empnumber" >
		   		empnubmer like '%'+#empnumber#+'%'  
		   </isNotNull> 
		     <isNotNull prepend =" AND " property="idnubmer" >
		   		idnumber like '%'+#idnubmer#+'%'  
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="parameter" >
		   		gzdw = #parameter# 
		   </isNotNull> 
		    order by addtime desc
		   
			
 	</select>
 	
 	 	<!--审查模块得数据-->
    <select id="querycheck" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select title,examiner,examinetime from T_DXGL_ZZSQGL_EXAMINE
    	<isNotNull prepend =" AND " property="jd" >
		   		JD = #jd# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and idnumber in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
         <isNotNull property="already">
                and uuid not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull property="idnumbers">
                and idnumber in
                <iterate property="idnumbers" conjunction="," open="(" close=")">
                    #idnumbers[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="name" >
		   		NAME like '%'+#name#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="empnumber" >
		   		empnubmer like '%'+#empnumber#+'%'  
		   </isNotNull> 
 	</select>
 	 	 	<!--授权审查模块得数据-->
    <select id="queryautList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.idnumber,t3.sex,t3.empnubmer,t3.xl,t3.zc,t3.zyly,t3.sqlx,t3.sqfwhdj, CONVERT(varchar(100),convert(datetime,t3.sqyxq), 23) sqyxq,t3.zmwj,t3.zt,t3.bz,t1.result,t1.remark 
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_EXAMINE t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_SQGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='aut'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid in 
                <iterate property="checkid" conjunction="," open="(" close=")">
                    #checkid[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="result">
                (t1.result='不合格' or t1.remark  like '%注意有效期%') 
         </isNotNull>
 	</select>
 	 	 	<!--无损数据得审查查看数据-->
    <select id="queryNdtList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.sex,t3.empnubmer,t3.idnumber,t3.zzlx,t3.zzdj,t3.zsbh,t3.gzdw,CONVERT(varchar(100),convert(datetime,t3.yxq), 23) yxq,t3.zmwj,t3.zt,t3.bz,t1.result,t1.remark  
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_EXAMINE t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_WSJCZZGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='Ndt'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
          <isNotNull prepend =" AND " property="checkid">
                t1.checkid in 
                <iterate property="checkid" conjunction="," open="(" close=")">
                    #checkid[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="result">
                (t1.result='不合格' or t1.remark  like '%注意有效期%') 
         </isNotNull>
         </select>
 	 	 	<!--特殊验证审查得查看数据-->
    <select id="queryProList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.sex,t3.empnubmer,t3.idnumber,t3.sydx,t3.yzxm,t3.gzdw,t3.pzrq,CONVERT(varchar(100),convert(datetime,t3.yxrq), 23) yxrq,t3.zmwj,t3.zt,t3.bz,t1.result,t1.remark 
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_EXAMINE t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_TSYZXMRYGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='Pro'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
	   		</isNotNull> 
          <isNotNull prepend =" AND " property="checkid">
                t1.checkid in 
                <iterate property="checkid" conjunction="," open="(" close=")">
                    #checkid[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="result">
                (t1.result='不合格' or t1.remark  like '%注意有效期%') 
         </isNotNull>
 	</select>
 	
 	 	 	 	<!--授权到期提醒得数据-->
    <select id="queryRemautList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.idnumber,t3.sex,t3.empnubmer,t3.xl,t3.zc,t3.sqlx,t3.zyly,t3.sqfwhdj,t3.sqyxq,t3.zmwj,t3.zt,t3.bz
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_SQGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='aut'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1' and  datediff(day,GETDATE(),sqyxq)-#advanceday#+#duration#&gt;=0 and  datediff(day,GETDATE(),sqyxq)-#advanceday#+#duration#&lt;=#duration#
         </isNotNull>
         
 	</select>
 	
 	<select id="queryRemautListdic" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.idnumber,t4.DICTNAME sex,t3.empnubmer,t5.DICTNAME xl,t6.DICTNAME zc,t7.DICTNAME sqlx,t9.DICTNAME zyly,t3.sqfwhdj,CONVERT(varchar(100),convert(datetime,t3.sqyxq), 23) sqyxq,t3.zmwj,t8.DICTNAME  zt,t3.bz
			 FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_SQGL t3 on t1.number=t3.uuid
			LEFT JOIN EOS_DICT_ENTRY t4 ON t4.DICTID = t3.sex
									AND t4.DICTTYPEID ='XB'		
			LEFT JOIN EOS_DICT_ENTRY t5 ON t5.DICTID = t3.xl
									AND t5.DICTTYPEID ='Edu'		

			LEFT JOIN EOS_DICT_ENTRY t6 ON t6.DICTID = t3.zc
									AND t6.DICTTYPEID ='ZC'		

			LEFT JOIN EOS_DICT_ENTRY t7 ON t7.DICTID = t3.sqlx
									AND t7.DICTTYPEID ='SQTYPE'		

			LEFT JOIN EOS_DICT_ENTRY t8 ON t8.DICTID = t3.zt
									AND t8.DICTTYPEID ='SQGL_WSZT'	
			LEFT JOIN EOS_DICT_ENTRY t9 ON t9.DICTID = t3.zyly
									AND t9.DICTTYPEID ='ZYLY'	

			where t3.isdelete=0 and t2.relationtype='aut'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1' and  datediff(day,GETDATE(),sqyxq)-#advanceday#+#duration#&gt;=0 and datediff(day,GETDATE(),sqyxq)-#advanceday#+#duration#&lt;=#duration#
                 
         </isNotNull>
         
 	</select>
 	
 	 	 	<!--无损数据得到期提醒查看数据-->
    <select id="queryRemNdtList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.sex,t3.empnubmer,t3.idnumber,t3.zzlx,t3.zzdj,t3.zsbh,t3.gzdw,t3.yxq,t3.zmwj,t3.zt,t3.bz
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_WSJCZZGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='Ndt'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1' and    datediff(day,GETDATE(),yxq)-#advanceday#+#duration#&gt;=0 and    datediff(day,GETDATE(),yxq)-#advanceday#+#duration#&lt;=#duration#
                and datediff(day,GETDATE(),yxq)>=0
         </isNotNull>
         </select>
         
         
         	 	<!--无损数据得到期提醒查看数据-->
    <select id="queryRemNdtListdic" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t4.DICTNAME sex,t3.empnubmer,t3.idnumber,t5.DICTNAME  zzlx,t6.DICTNAME  zzdj,t3.zsbh,t3.gzdw,CONVERT(varchar(100),convert(datetime,t3.yxq), 23) yxq,t3.zmwj,t6.DICTNAME zt,t3.bz
			  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_WSJCZZGL t3 on t1.number=t3.uuid
			LEFT JOIN EOS_DICT_ENTRY t4 ON t4.DICTID = t3.sex
									AND t4.DICTTYPEID ='XB'		
			LEFT JOIN EOS_DICT_ENTRY t5 ON t5.DICTID = t3.zzlx
												AND t5.DICTTYPEID ='ZZLX'		

			LEFT JOIN EOS_DICT_ENTRY t6 ON t6.DICTID = t3.zzdj
												AND t6.DICTTYPEID ='WSDJ'		

			LEFT JOIN EOS_DICT_ENTRY t7 ON t7.DICTID = t3.zt
												AND t7.DICTTYPEID ='WSZT'		

			where t3.isdelete=0 and t2.relationtype='Ndt'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
		   </isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1' and datediff(day,GETDATE(),yxq)-#advanceday#+#duration#&gt;=0 and datediff(day,GETDATE(),yxq)-#advanceday#+#duration#&lt;=#duration#
         </isNotNull>
         </select>
         
         
         
 	 	 	<!--特殊验证到期提醒查看数据-->
    <select id="queryRemProList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t3.sex,t3.empnubmer,t3.idnumber,t3.sydx,t3.yzxm,t3.gzdw,t3.pzrq,t3.yxrq,t3.zmwj,t3.zt,t3.bz
			,t4.FILE_ID as fileId,t4.FILE_PATH
			as filepath,t4.FILE_REAL_NAME as fileRealName  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_TSYZXMRYGL t3 on t1.number=t3.uuid
			left join T_COMMON_FILEUPLOAD t4 on t3.FILDID = t4.file_id
			where t3.isdelete=0 and t2.relationtype='Pro'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
	   		</isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1'  and datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&gt;=0 and datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&lt;=#duration#
                
         </isNotNull>
 	</select>
 	
 	 <select id="queryRemProListdic" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.uuid,
			t3.name,t4.DICTNAME sex,t3.empnubmer,t3.idnumber,t5.DICTNAME sydx,t7.DICTNAME yzxm,t3.gzdw,CONVERT(varchar(100),convert(datetime,t3.pzrq), 23) pzrq,CONVERT(varchar(100),convert(datetime,t3.yxrq), 23) yxrq,t3.zmwj,t6.DICTNAME zt,t3.bz
			  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_DXGL_ZZSQGL_TSYZXMRYGL t3 on t1.number=t3.uuid
			
LEFT JOIN EOS_DICT_ENTRY t4 ON t4.DICTID = t3.sex
									AND t4.DICTTYPEID ='XB'		
LEFT JOIN EOS_DICT_ENTRY t5 ON t5.DICTID = t3.sydx
									AND t5.DICTTYPEID ='SYDX'		
LEFT JOIN EOS_DICT_ENTRY t6 ON t6.DICTID = t3.zt
									AND t6.DICTTYPEID ='WSZT'
LEFT JOIN EOS_DICT_ENTRY t7 ON t7.DICTID = t3.yzxm
									AND t7.DICTTYPEID ='YZXM'	
			where t3.isdelete=0 and t2.relationtype='Pro'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
	   		</isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="advanceday">
               t2.state='1' and datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&gt;=0 and datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&lt;=#duration#
                
         </isNotNull>
 	</select>
 	
 	    <select id="everdayEamil" resultClass="commonj.sdo.DataObject">
    	SELECT * FROM T_DXGL_ZZSQGL_REMINDER where isdelete='0' and state='1' and relationType is not null and jd is not null
 	</select>
 	
 	
 	<delete id="deleterelation" parameterClass="java.util.Map" >
    	delete T_DXGL_ZZSQGL_RELATION where checkid in 
    	<isNotNull  property="checkids">
          <iterate property="checkids" conjunction="," open="(" close=")">
                    #checkids[]#
           </iterate>
           </isNotNull>
 	</delete>
 	<select id="queryMacList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t3.*
			FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join WELDING_MACHINE t3 on t1.number=t3.uuid
			where t3.isdel=0 and t2.relationtype='Mac'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.JD = #jd# 
	   		</isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend =" AND " property="relationType">
                t1.relationType=#relationType#
         </isNotNull>
         <isNotNull prepend =" AND " property="advanceday">
                t2.state='1' and  datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&gt;=0 and datediff(day,GETDATE(),yxrq)-#advanceday#+#duration#&lt;=#duration#
                
         </isNotNull>
 	</select>
 	
 	 	   <!--升版提醒-->
    <select id="getProgramdata" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select *
 FROM T_CGN_DGGL_CXGL t1
where t1.isdelete=0
    	<isNotNull prepend =" AND " property="jd" >
		   		DZID = #jd# 
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="jz" >
		   		JZID = #jz# 
		   </isNotNull> 
    	 <isNotNull property="Identification">
                and UUID in
                <iterate property="Identification" conjunction="," open="(" close=")">
                    #Identification[]#
                </iterate>
         </isNotNull>
         <isNotNull property="already">
                and UUID not in
                <iterate property="already" conjunction="," open="(" close=")">
                    #already[]#
                </iterate>
         </isNotNull>
         <isNotNull prepend =" AND " property="cxbm" >
		   		cxbm like '%'+#cxbm#+'%'
		   </isNotNull> 
		   <isNotNull prepend =" AND " property="status" >
		   		status like '%'+#status#+'%'  
		   </isNotNull>
		   <isNotNull prepend =" AND " property="xcsbsj" >
		   		xcsbsj like '%'+#xcsbsj#+'%'  
		   </isNotNull>
		   order by addtime desc
 	</select>
 	 	 	 	<!--升版提醒查看数据-->
    <select id="queryprogramList" parameterClass="java.util.Map" resultClass="commonj.sdo.DataObject">
    	select t4.DICTNAME as LX,CONVERT(varchar(100),convert(datetime,t3.xcsbsj), 23) XCSBSJ,CONVERT(varchar(100),convert(datetime,t3.SXRQ), 23) SXRQ,t3.*
			  FROM
			T_DXGL_ZZSQGL_RELATION t1
			left join T_DXGL_ZZSQGL_REMINDER t2 on t2.uuid=t1.checkid
			left join T_CGN_DGGL_CXGL t3 on t1.number=t3.UUID
			LEFT JOIN EOS_DICT_ENTRY t4 on t4.DICTID=t3.LX and t4.DICTTYPEID ='CXLX'
			where t3.isdelete=0 and t2.relationtype='program'
    	<isNotNull prepend =" AND " property="jd" >
		   		 t3.DZID = #jd# 
	   		</isNotNull> 
	   		<isNotNull prepend =" AND " property="jz" >
		   		 t3.JZID = #jz# 
	   		</isNotNull> 
         <isNotNull prepend =" AND " property="checkid">
                t1.checkid =#checkid#
         </isNotNull>
         <isNotNull prepend ="" property="duration">
             and t2.state='1' and  datediff(day,GETDATE(),t2.remindertime)+#duration#&lt;=#duration# and  datediff(day,GETDATE(),t2.remindertime)+#duration#&gt;=0
         </isNotNull>
 	</select>
 	
</sqlMap>