<?xml version="1.0" encoding="UTF-8"?>
<!-- author:jirukang -->
<sqlMap>
    <parameterMap class="commonj.sdo.DataObject" id="parameterMap">
        <parameter javaType="date" jdbcType="DATE" property="dateType"/>
    </parameterMap>
    <resultMap class="commonj.sdo.DataObject" id="resultMap">
        <result column="TYPEID" javaType="string" property="typeId"/>
    </resultMap>
    <select id="select_id" parameterMap="parameterMap" resultMap="resultMap"><![CDATA[sql statement]]></select>
    
    
    <delete id="delpressurevessel" parameterClass="java.lang.String">
		DELETE FROM T_PRESSUREVESSEL where uuid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_CONNECTINGPIPE where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_EQUIPMENTHISTORYINFO where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_LEVELGAUGE where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_LONGITUDINALWELD where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_PRESSUREGAUGE where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_RUPTUREDISC where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_SAFETYVALVE where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_SHELLGIRTHWELD where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_SUPPLEMENTARYINFO where realid=#uuid#;
		DELETE FROM T_PRESSUREVESSEL_TEMPERATUREINSTRUMENT where realid=#uuid#;
	</delete>
	
	<!--壳体纵焊缝-->
	<select id="getLongitudinalweld" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,slweldnumber,slweldparameters from T_PRESSUREVESSEL_LONGITUDINALWELD
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,slweldnumber
	</select>
	
	<!--壳体环焊缝-->
	<select id="getShellgirthweld" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,sgweldnumber,srweldparameters from T_PRESSUREVESSEL_SHELLGIRTHWELD
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,sgweldnumber
	</select>
	
	<!--连接管道-->
	<select id="getConnectingpipe" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,connectpipenumber,connectpipeparameter from T_PRESSUREVESSEL_CONNECTINGPIPE
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,connectpipenumber
	</select>
	
	<!--安全阀-->
	<select id="getSafetyvalve" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,svnumber,svmodel,svinstallationlocation,svsettingpressure,svnominalpressure,svopeningpressure,svsealingpressure,svnominaldiameter,svquantity,svmanufacturer from T_PRESSUREVESSEL_SAFETYVALVE
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,svnumber
	</select>
	
	<!--压力表-->
	<select id="getPressuregauge" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,pgnumber,pgmodel,pggerange,pginstallationlocation,pgaccuracy,pgquantity,pgmanufacturer from T_PRESSUREVESSEL_PRESSUREGAUGE
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,pgnumber
	</select>
	
	<!--液位计-->
	<select id="getLevelgauge" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,lgnumber,lgmodel,lggerange,lginstallationlocation,lgaccuracy,lgquantity,lgmanufacturer from T_PRESSUREVESSEL_LEVELGAUGE
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,lgnumber
	</select>
	
	<!--测温仪表-->
	<select id="getTemperatureinstrument" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,tinumber,timodel,tigerange,tiinstallationlocation,tiaccuracy,tiquantity,timanufacturer from T_PRESSUREVESSEL_TEMPERATUREINSTRUMENT
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,tinumber
	</select>
	
	<!--爆破片-->
	<select id="getRupturedisc" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,rdnumber,rdmodel,rdgerange,rdinstallationlocation,rdaccuracy,rdquantity,rdmanufacturer from T_PRESSUREVESSEL_RUPTUREDISC
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,rdnumber
	</select>
	
	<!--辅助信息-->
	<select id="getSupplementaryinfo" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,registrationauthority,registrationdate,deviceregistrationcode,registrant,useunit,useorganizationcode,useunitaddress,postalcode,safetymanagementdepartment,securitymanager,contactnumber,useregistrationnumber,serialnumber,updatedateday,propertyunitandcode,manufacturecountry,manufacturedate,designunitandcode,designdate,designspecification,manufacturingunitandcode,undertakingorganizationcode,manufacturingspecification,installationunitandcode,installationdate,usedate,supervisoryunitandcode,inspectionentity,inspectionunitcode,inspectiondate,identifycategory,mainproblem,testresults,reportnumber,nextinspectiondate,accidentcategory,accidentdate,accidenthandling,devicechangemethod,equipmentchangeproject,equipmentchangedate,changecommitmentunit from T_PRESSUREVESSEL_SUPPLEMENTARYINFO
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,registrationdate desc
	</select>
	
	<!--设备历史信息-->
	<select id="getEquipmenthistoryinfo" parameterClass="java.util.List" resultClass="commonj.sdo.DataObject">
	  select ISNULL(equipmentnumber,(select t.equipmentnumber from T_PRESSUREVESSEL t where t.uuid = realid)) equipmentnumber,deviceversion,commissiontime,freezereplacetime,freezereplacereason,enteringperson,enteringtime,operating from T_PRESSUREVESSEL_EQUIPMENTHISTORYINFO
	  where realid in 
      	<iterate open="(" close=")" conjunction=",">
			#realidList[]#
	 	</iterate>
	 	order by equipmentnumber,deviceversion
	</select>
	
	
	<!--修改流程状态-->
	<update id="updateprocessStatus" parameterClass="java.util.Map" >
	  update T_PRESSUREVESSEL set processStatus='0' ,processInstId=#processInstId#  where uuid=#uuid#
	</update>
	
</sqlMap>